export const formatCommitComment = (commit: any, summary: string, repoFullName: string): string => {
    const timestamp = new Date(commit.timestamp || Date.now()).toLocaleString("en-US", {
        timeZone: "Asia/Kolkata",
        dateStyle: "medium",
        timeStyle: "short",
    });

    const filesChanged = [
        ...(commit.added || []).map((f: string) => `  + ${f}`),
        ...(commit.modified || []).map((f: string) => `  ~ ${f}`),
        ...(commit.removed || []).map((f: string) => `  - ${f}`),
    ];

    return `ðŸ”„ NEW COMMIT DETECTED

ðŸ“ Commit Title: ${commit.message}
ðŸ‘¤ Author: ${commit.author?.name || "Unknown"}
ðŸ“… Time: ${timestamp}
ðŸ”— Repository: ${repoFullName}
ðŸ†” Commit ID: ${commit.id?.slice(0, 7)}

ðŸ“‚ Files Changed (${filesChanged.length}):
${filesChanged.length > 0 ? filesChanged.slice(0, 10).join("\n") : "  No files listed"}
${filesChanged.length > 10 ? `\n  ... and ${filesChanged.length - 10} more files` : ""}

ðŸ¤– AI Analysis:
${summary}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Generated by AI Assistant`;
};

export const formatPRComment = (pr: any, action: string, summary: string, repoFullName: string): string => {
    const timestamp = new Date(pr.updated_at || Date.now()).toLocaleString("en-US", {
        timeZone: "Asia/Kolkata",
        dateStyle: "medium",
        timeStyle: "short",
    });

    const actionEmoji =
        {
            opened: "ðŸ†•",
            synchronize: "ðŸ”„",
            closed: pr.merged ? "âœ…" : "âŒ",
            reopened: "ðŸ”„",
        }[action] || "ðŸ“";

    const actionText = action.charAt(0).toUpperCase() + action.slice(1);

    return `${actionEmoji} PULL REQUEST ${actionText.toUpperCase()}

ðŸ“ PR Title: ${pr.title}
ðŸ‘¤ Author: ${pr.user?.login || "Unknown"}
ðŸ“… Time: ${timestamp}
ðŸ”— Repository: ${repoFullName}
ðŸ”¢ Pull Request #${pr.number}
ðŸŒ¿ Branch: ${pr.head?.ref} â†’ ${pr.base?.ref}
${pr.html_url ? `ðŸ”— URL: ${pr.html_url}` : ""}

ðŸ“‹ Description:
${pr.body ? (pr.body.length > 300 ? pr.body.slice(0, 300) + "..." : pr.body) : "No description provided"}

ðŸ¤– AI Analysis:
${summary}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Generated by AI Assistant`;
};
